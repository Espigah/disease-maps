(this["webpackJsonpdisease-maps"]=this["webpackJsonpdisease-maps"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),i=(a(80),a(56)),l=a(26);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(37),s=a.n(u),d=a(47),m=a(41),f=a(144),p=a(155),g=a(148),v=a(154);var h=function(e){return r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(p.a,{name:"options",onChange:function(t){var a=Number(t.currentTarget.value);e.onChange(!!a)},row:!0},r.a.createElement(g.a,{value:"1",control:r.a.createElement(v.a,null),label:"Estou infectado"})))},E=a(65),b={infected:null,period:null,local:null,lastSteps:[]},x={addStep:function(e,t){},removeStep:function(e,t){},default:function(e,t){var a=t.value,n=a.value;e[a.property]=n}},w=function(e,t){return{type:"default",value:{property:e,value:t}}};function y(e,t){var a=x[t.type];return a?Object(E.a)(e,(function(e){return a(e,t)})):(console.log("[WARNING] Action without reducer:",t),e)}var O=function(){return y},j=function(){return b},C=function(e){return w("infected",e)},S=a(115),A=a(5),k=a(153);var F=function(e){return r.a.createElement(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,{id:"code",label:"Cep"})),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,{id:"city",label:"Cidade"})),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,{id:"neighborhood",label:"Bairro"})),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,{id:"street",label:"Rua"})),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(k.a,{id:"number",label:"N\xfamero"})))};Object(A.a)({root:{background:"linear-gradient(45deg, #6beafe 30%, #79e0ff 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(105, 165, 255, .3)",color:"white",padding:"5px 30px 15px 30px",margin:"10px 5px"}})((function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{variant:"h4",component:"h5"},"Onde voc\xea est\xe1 agora?"),r.a.createElement("div",null,r.a.createElement(F,null)))}));var I=function(e,t){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e(a)}),t,{enableHighAccuracy:!0,maximumAge:1,timeout:100})};Object(A.a)({root:{background:"linear-gradient(45deg, #88fe6b 30%, #53ffc7 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(128, 255, 105, .3)",color:"white",padding:"5px 30px 15px 30px",margin:"10px 5px"}})((function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{variant:"h4",component:"h5"},"Onde essa pessoa mora?"),r.a.createElement("div",null,r.a.createElement(F,null)))}));var N=a(149),R=(a(150),a(156)),W=a(40),B=a.n(W);B.a.initializeApp({apiKey:"AIzaSyCnt0ug9TZhcYtWn2jAQwhgwWmPxIL78xE",authDomain:"diseasemaps-74aac.firebaseapp.com",databaseURL:"https://diseasemaps-74aac.firebaseio.com",projectId:"diseasemaps-74aac",storageBucket:"diseasemaps-74aac.appspot.com",messagingSenderId:"463180539951",appId:"1:463180539951:web:cba2d54ebd0723da743eda",measurementId:"G-Q5FYF1Y21R"}),B.a.analytics();var P=B.a.firestore(),Y=(a(96),function(){return P.collection("locations").get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data())})),t})).catch((function(e){return console.log("Error getting document",e),Promise.reject(e)}))}),z=function(e){var t=e.lat,a=e.lng,n=P.collection("locations"),r={created:B.a.firestore.FieldValue.serverTimestamp(),timestamp:Date.now(),infected:!0,infectedDays:1,local:{lat:t,lng:a},lastSteps:[]};return n.add(r)},T=function(){return Y().then((function(e){var t=e.filter((function(e){return e.lastSteps})).map((function(e){return e.lastSteps})).reduce((function(e,t){return e.concat(t)}),[]);return{suspicions:e.filter((function(e){return"infected"in e&&!e.infected})).map((function(e){return e.local})),spots:t,clumping:[{lat:-22.9228481,lng:-43.54955}]}}))},D=function(e){var t=e.lat,a=e.lng;return z({lat:t,lng:a})};var H=function(){var e=Object(l.f)(),t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(m.a)(i,2),p=u[0],g=u[1],v=Object(n.useReducer)(O(),j()),E=Object(m.a)(v,2),b=E[0],x=E[1],w=function(e){var t=e.infected;return null===t?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement(N.a,null))},y=function(e){e.infected;return r.a.createElement(r.a.Fragment,null)};Object(n.useEffect)((function(){I((function(e){var t=e.latitude,a=e.longitude;g({latitude:t,longitude:a}),S()}),(function(e){console.log(JSON.stringify(e))}))}),[]);var S=Object(n.useCallback)(Object(d.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c&&p){t.next=2;break}return t.abrupt("return");case 2:return o(!0),t.next=5,D({lat:p.latitude,lng:p.longitude});case 5:e.push("/map");case 6:case"end":return t.stop()}}),t)}))),[c,p]);return r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(R.a,{class:"w-100"},r.a.createElement("div",{class:"two fields"},r.a.createElement(h,{onChange:function(e){x(C(e)),S()},infected:b.infected}),r.a.createElement(w,{infected:b.infected})),r.a.createElement("div",{class:"ui button",tabindex:"0"},r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end"},r.a.createElement(y,{infected:b.infected}))))))},J=(a(99),a(67)),Q=Object(A.a)({root:{overflow:"none",height:"calc(100vh - 58px)","@media (min-width: 600px)":{height:"calc(100vh - 67px)"},"@media (min-width: 0px) and (orientation: landscape)":{height:"calc(100vh - 50px)"}}})((function(e){var t=e.classes;navigator.geolocation.getCurrentPosition((function(e){console.log(e.coords)})),navigator.geolocation.watchPosition((function(e){console.log(e.coords)}),(function(){}),{enableHighAccuracy:!0,maximumAge:500,timeout:500});var a=Object(J.a)("AIzaSyCbdYlBtAHMkrKyv4jh8vYqWRT_d6AQfas",{center:{lat:-22.9228481,lng:-43.5497464},zoom:17}),c=a.ref,o=a.map,i=(a.google,function(e){var t=e.center,a=e.radius,n=e.fillColor,r=e.fillOpacity;return new window.google.maps.Circle({center:t,radius:a,fillColor:n,fillOpacity:r,map:o,strokeOpacity:0})}),l=function(e){var t=e.lat,a=e.lng;e.date;console.log("[ drawSpotCircle ]");i({center:{lat:t,lng:a},radius:5,fillColor:"#FF0000",fillOpacity:.5}),i({center:{lat:t,lng:a},radius:10,fillColor:"#FF9A9A",fillOpacity:.1})},u=function(e){var t=e.lat,a=e.lng;console.log("[ drawClumpingCircle ]"),i({center:{lat:t,lng:a},radius:10,fillColor:"#FCF10A",fillOpacity:.3})},m=function(e){var t=e.lat,a=e.lng;console.log("[ drawSuspicionsCircle ]");i({center:{lat:t,lng:a},radius:20,fillColor:"#33E9FF",fillOpacity:.05})};return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,a=t.clumping,n=t.spots,r=t.suspicions,console.log(r),a.map(u),r.map(m),n.map(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[o]),r.a.createElement("div",{className:t.root},r.a.createElement("div",{ref:c,style:{height:"100%",width:"100%",position:"relative",overflow:"none"}}))}));var G=function(){return r.a.createElement("div",null,r.a.createElement(Q,null))},K=a(151),L=a(152);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K.a,{position:"static"}," ",r.a.createElement(L.a,null,r.a.createElement(S.a,{variant:"h6"},"Covid"))),r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(H,null)),r.a.createElement(l.a,{path:"/map"},r.a.createElement(G,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(114)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.b1e84aa9.chunk.js.map